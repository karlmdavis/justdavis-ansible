dn: cn=config
changetype: modify
# The hostname to use for SASL/GSSAPI authentication. This must match the hostname
# clients use to connect. Since clients connect to ldaps://intranet.{{ domain }}, this
# must be set to intranet.{{ domain }} (not eddings.{{ domain }}, the server's actual
# hostname). When omitted, slapd uses gethostname() which returns "eddings", causing
# GSSAPI authentication failures.
replace: olcSaslHost
olcSaslHost: intranet.{{ domain }}
-
# The Kerberos realm name.
replace: olcSaslRealm
olcSaslRealm: {{ domain | upper }}
-
# Disallow insecure authentication mechanisms such as plain passwords.
replace: olcSaslSecProps
olcSaslSecProps: noplain,noanonymous,minssf=56
-
# By default, the DN of an authorized Kerberos client takes the form uid=<Kerberos principal name>,cn=<Kerberos Realm>,cn=GSSAPI,cn=auth
# Adjust the following mappings to match the local configuration as necessary.
replace: olcAuthzRegexp
olcAuthzRegexp: {0}"uid=([^/]*),cn={{ domain }},cn=GSSAPI,cn=auth" "uid=$1,ou=people,dc=justdavis,dc=com"
# Administrative user map, assumes existence of cn=admin,cn=config
olcAuthzRegexp: {1}"uid=karl/admin,cn={{ domain }},cn=gssapi,cn=auth" "cn=admin,cn=config"

