---

##
# Almost all of the config for this role is handled by the dependencies listed in 
# `../meta/main.yml`.
##

- name: Firewall - Allow DNS Traffic
  ufw:
    rule: allow
    name: Bind9
  become: true

- name: Ensure Stub OpenDKIM Record Exists
  command: /usr/bin/touch /etc/bind/dkim-{{ domain }}.record
  args:
    creates: /etc/bind/dkim-{{ domain }}.record
  become: true

- include: test.yml
  tags: test

