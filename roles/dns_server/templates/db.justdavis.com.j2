$TTL 1h ; sets the default time-to-live for this zone

; name ttl class rr    name-server                 email-addr  (sn ref ret ex min)
@          IN    SOA   ns1.{{ domain }}.           hostmaster.{{ domain }}. (
                              2017123000 ; sn = serial number (yyyymmdd##)
                              1h         ; ref = refresh
                              15M        ; ret = update retry
                              4W         ; ex = expiry
                              1h         ; min = minimum
                              )

; Nameserver Records
{% if not is_test %}
; name                   ttl    class   rr                name
@                               IN      NS                ns1.{{ domain }}.
                                IN      NS                ns6.gandi.net.

; subdomain              ttl    class   rr                name
tests.justdavis.com.            IN      NS                ns-357.awsdns-44.com.
                                IN      NS                ns-1620.awsdns-10.co.uk.
                                IN      NS                ns-770.awsdns-32.net.
                                IN      NS                ns-1080.awsdns-07.org.
{% else %}
; name                   ttl    class   rr                name
@                               IN      NS                ns1.{{ domain }}.
{% endif %}

; IPv4 Address Records
; name             ttl    class   rr                name
@                         IN      A                 {{ eddings_public_ip }}
ns1                       IN      A                 {{ eddings_public_ip }}
; FIXME Switch mail server records, after switch.
mail                      IN      A                 96.86.32.138
;mail                      IN      A                 {{ eddings_public_ip }}
eddings                   IN      A                 {{ eddings_public_ip }}
piers                     IN      A                 96.86.32.138
karlanderica              IN      A                 96.86.32.141

; IPv4 Address Records for Private "karlanderica" LAN.
; name             ttl    class   rr                name
eddings.karlanderica      IN      A                 {{ eddings_private_ip }}
jordan-u.karlanderica     IN      A                 10.0.0.50
brooks.karlanderica       IN      A                 10.0.0.51
dumas.karlanderica        IN      A                 10.0.0.52

; CNAME Records
; name             ttl    class   rr                name
www                       IN      CNAME             @
smtp                      IN      CNAME             mail
kerberos                  IN      CNAME             eddings
ldap                      IN      CNAME             eddings
kelso                     IN      CNAME             karlanderica
longview                  IN      CNAME             karlanderica

; Mailserver Records
; name             ttl    class   rr     priority   name
@                         IN      MX     10         mail

; TXT Records
; name             ttl    class   rr                name
; Other servers should accept mail for this domain that comes from systems
; matching at least one of our MX records oe eddings' IP. All other mail should
; be rejected.
@                         IN      TXT               "v=spf1 mx ip4:{{ eddings_public_ip }} -all"
_kerberos                 IN      TXT               "{{ domain | upper }}"
; The DKIM public key used by piers:
2C1B581A-34C6-11E5-B653-7B34DD816394._domainkey IN      TXT     ( "v=DKIM1; k=rsa; "
          "p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDVsRq7QzJ+cGi3xwJu/cKfcbyeR8XG2XDqcKQDoHOUH1iCIbQbYT5gnMvmhWcihNRKtn4/W80RZA7w+8QWUoFsl+KJOyZpU42u65kAqHDlYuXQlb/CFVLVtWh12FwXl4G3ukb4+NK4MStEoiz9im67/vqhLbBNCaMaFVeW9Joo/QIDAQAB" )  ; ----- DKIM key 2C1B581A-34C6-11E5-B653-7B34DD816394 for justdavis.com
; The DKIM public key used by eddings (which can send mail but isn't yet configured to receive any):
$INCLUDE /etc/bind/dkim-{{ domain }}.record

; SRV Records
; name                   ttl    class   rr                name
_kerberos._udp                  IN      SRV               0 0 88 eddings
_kerberos-master._udp           IN      SRV               0 0 88 eddings
_kerberos-adm._tcp              IN      SRV               0 0 749 eddings
_kpasswd._udp                   IN      SRV               0 0 464 eddings

